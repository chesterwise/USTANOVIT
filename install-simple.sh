#!/bin/bash

################################################################################
# ÐÐ’Ð¢ÐžÐœÐÐ¢Ð˜Ð§Ð•Ð¡ÐšÐÐ¯ Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ FINANCE BOT ÐÐ TIMEWEB (Ð‘Ð•Ð— CLOUDFLARE)
# Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ long polling - Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ URL
################################################################################

set -e

echo "=========================================="
echo "ðŸš€ ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Finance Bot"
echo "=========================================="

# Ð¦Ð²ÐµÑ‚Ð° Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð°
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ ÐºÑ€Ð°ÑÐ¸Ð²Ð¾Ð³Ð¾ Ð²Ñ‹Ð²Ð¾Ð´Ð°
print_success() {
    echo -e "${GREEN}âœ“ $1${NC}"
}

print_error() {
    echo -e "${RED}âœ— $1${NC}"
}

print_info() {
    echo -e "${YELLOW}â„¹ $1${NC}"
}

print_step() {
    echo -e "${BLUE}â–¶ $1${NC}"
}

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€Ð°Ð² root
if [ "$EUID" -ne 0 ]; then 
    print_error "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð¾Ñ‚ root (sudo bash install-simple.sh)"
    exit 1
fi

print_success "Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ Ð¾Ñ‚ root"

# ÐžÐ¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÐ¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
PROJECT_DIR="/root/finance-bot"
print_info "Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: $PROJECT_DIR"

################################################################################
# Ð¨ÐÐ“ 1: ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
################################################################################
print_step "ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹..."
apt update -y
apt upgrade -y
print_success "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°"

################################################################################
# Ð¨ÐÐ“ 2: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Node.js 20
################################################################################
print_step "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Node.js 20..."
if ! command -v node &> /dev/null; then
    curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
    apt install -y nodejs
    print_success "Node.js ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½"
else
    NODE_VERSION=$(node -v)
    print_success "Node.js ÑƒÐ¶Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½: $NODE_VERSION"
fi

################################################################################
# Ð¨ÐÐ“ 3: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±Ð°Ð·Ð¾Ð²Ñ‹Ñ… ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚
################################################################################
print_step "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±Ð°Ð·Ð¾Ð²Ñ‹Ñ… ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚..."
apt install -y git curl wget nano
print_success "Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹"

################################################################################
# Ð¨ÐÐ“ 4: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
################################################################################
CURRENT_DIR=$(pwd)
if [ -f "$CURRENT_DIR/package.json" ] && [ -f "$CURRENT_DIR/src/bot-polling.ts" ]; then
    print_info "ÐžÐ±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð² Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸: $CURRENT_DIR"
    if [ "$CURRENT_DIR" != "$PROJECT_DIR" ]; then
        print_step "ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚ Ð² $PROJECT_DIR..."
        mkdir -p "$PROJECT_DIR"
        
        # ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð²ÑÐµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð¿Ð°Ð¿ÐºÐ¸ (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ðµ, Ð½Ð¾ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾)
        shopt -s dotglob
        for item in "$CURRENT_DIR"/*; do
            # ÐŸÑ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼ . Ð¸ ..
            if [ "$(basename "$item")" != "." ] && [ "$(basename "$item")" != ".." ]; then
                cp -r "$item" "$PROJECT_DIR/"
            fi
        done
        shopt -u dotglob
        
        print_success "ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½"
    else
        print_info "ÐŸÑ€Ð¾ÐµÐºÑ‚ ÑƒÐ¶Ðµ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ñ‚ÑÑ Ð² Ñ†ÐµÐ»ÐµÐ²Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸"
    fi
else
    print_error "ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð½Ðµ Ð¾Ð±Ð½Ð°Ñ€ÑƒÐ¶ÐµÐ½ Ð² Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸"
    print_info "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð² $PROJECT_DIR Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑÐ½Ð¾Ð²Ð°"
    exit 1
fi

cd "$PROJECT_DIR"
print_success "ÐŸÐµÑ€ÐµÑˆÐ»Ð¸ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°: $PROJECT_DIR"

################################################################################
# Ð¨ÐÐ“ 5: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
################################################################################
print_step "ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ..."

if [ ! -f ".env" ]; then
    print_info "Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ñ„Ð°Ð¹Ð» .env..."
    cat > .env << 'EOF'
# Telegram Bot Token
TELEGRAM_BOT_TOKEN=

# Environment
NODE_ENV=production

# Database (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ SQLite Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼)
# DATABASE_URL=

# Node.js Memory Limit
NODE_OPTIONS=--max-old-space-size=1024
EOF
    print_success "Ð¡Ð¾Ð·Ð´Ð°Ð½ Ñ„Ð°Ð¹Ð» .env"
    
    print_info "============================================"
    print_info "ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ TELEGRAM BOT TOKEN"
    print_info "============================================"
    echo ""
    print_info "Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð°:"
    print_info "1. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram Ð¸ Ð½Ð°Ð¹Ð´Ð¸Ñ‚Ðµ @BotFather"
    print_info "2. ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ /newbot"
    print_info "3. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ Ð¸ ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½"
    echo ""
    read -p "Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ TELEGRAM_BOT_TOKEN: " BOT_TOKEN
    
    if [ -z "$BOT_TOKEN" ]; then
        print_error "TELEGRAM_BOT_TOKEN Ð½Ðµ ÑƒÐºÐ°Ð·Ð°Ð½!"
        print_info "Ð’Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐµÐ³Ð¾ Ð¿Ð¾Ð·Ð¶Ðµ Ð² Ñ„Ð°Ð¹Ð»: nano $PROJECT_DIR/.env"
        print_info "Ð¡Ñ‚Ñ€Ð¾ÐºÐ°: TELEGRAM_BOT_TOKEN=Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½"
    else
        sed -i "s|TELEGRAM_BOT_TOKEN=|TELEGRAM_BOT_TOKEN=$BOT_TOKEN|" .env
        print_success "TELEGRAM_BOT_TOKEN ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½"
    fi
else
    print_success "Ð¤Ð°Ð¹Ð» .env ÑƒÐ¶Ðµ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚"
    
    # ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð»Ð¸ Ñ‚Ð¾ÐºÐµÐ½
    if ! grep -q "TELEGRAM_BOT_TOKEN=.\+" .env; then
        print_error "TELEGRAM_BOT_TOKEN Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² .env!"
        print_info "ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¾Ñ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð»: nano $PROJECT_DIR/.env"
    fi
fi

################################################################################
# Ð¨ÐÐ“ 6: Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
################################################################################
print_step "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° npm Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹..."
npm install --production
print_success "Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹"

################################################################################
# Ð¨ÐÐ“ 7: Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
################################################################################
print_step "Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…..."
if [ -f "scripts/create-tables-safe.ts" ]; then
    npx tsx scripts/create-tables-safe.ts || print_info "Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… ÑƒÐ¶Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð°"
    print_success "Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð°"
else
    print_info "Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ† Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½, Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÐµÐ¼"
fi

################################################################################
# Ð¨ÐÐ“ 8: Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°
################################################################################
print_step "Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ systemd ÑÐµÑ€Ð²Ð¸ÑÐ°..."

cat > /etc/systemd/system/finance-bot.service << EOF
[Unit]
Description=Finance Bot (Telegram Polling)
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=$PROJECT_DIR
Environment=NODE_ENV=production
ExecStart=/usr/bin/npx tsx src/bot-polling.ts
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF

print_success "Ð¡Ð¾Ð·Ð´Ð°Ð½ systemd ÑÐµÑ€Ð²Ð¸Ñ: finance-bot.service"

################################################################################
# Ð¨ÐÐ“ 9: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¾ÐºÐµÐ½Ð° Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼
################################################################################
print_step "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸..."

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ñ‚Ð¾ÐºÐµÐ½ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² .env
if ! grep -q "TELEGRAM_BOT_TOKEN=.\+" .env; then
    print_error "âŒ TELEGRAM_BOT_TOKEN Ð½Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½ Ð² .env!"
    print_error "ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ„Ð°Ð¹Ð»: nano $PROJECT_DIR/.env"
    print_info "Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°, Ð½Ð¾ Ð±Ð¾Ñ‚ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½. Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:"
    print_info "   systemctl start finance-bot"
    exit 1
fi

print_success "Ð¢Ð¾ÐºÐµÐ½ Ð±Ð¾Ñ‚Ð° Ð½Ð°Ð¹Ð´ÐµÐ½ Ð² .env"

################################################################################
# Ð¨ÐÐ“ 10: Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°
################################################################################
print_step "Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°..."

# ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ systemd
systemctl daemon-reload

# Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿ÑƒÑÐº
systemctl enable finance-bot

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð±Ð¾Ñ‚Ð°
systemctl start finance-bot

print_success "Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!"

################################################################################
# Ð¨ÐÐ“ 10: ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
################################################################################
print_step "ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð±Ð¾Ñ‚Ð°..."
sleep 3

if systemctl is-active --quiet finance-bot; then
    print_success "Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!"
    echo ""
    systemctl status finance-bot --no-pager -l | head -20
else
    print_error "Ð‘Ð¾Ñ‚ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ð»ÑÑ. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸:"
    echo ""
    journalctl -u finance-bot -n 50 --no-pager
fi

################################################################################
# Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐ˜Ð•
################################################################################
echo ""
print_success "============================================"
print_success "ðŸŽ‰ Ð£Ð¡Ð¢ÐÐÐžÐ’ÐšÐ Ð—ÐÐ’Ð•Ð Ð¨Ð•ÐÐ!"
print_success "============================================"
echo ""
print_info "ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹:"
echo ""
echo "ðŸ“Š ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð² Ð±Ð¾Ñ‚Ð°:"
echo "   journalctl -u finance-bot -f"
echo ""
echo "ðŸ”„ ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°:"
echo "   systemctl restart finance-bot"
echo ""
echo "ðŸ›‘ ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð±Ð¾Ñ‚Ð°:"
echo "   systemctl stop finance-bot"
echo ""
echo "â–¶ï¸  Ð—Ð°Ð¿ÑƒÑÐº Ð±Ð¾Ñ‚Ð°:"
echo "   systemctl start finance-bot"
echo ""
echo "ðŸ“ˆ Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð±Ð¾Ñ‚Ð°:"
echo "   systemctl status finance-bot"
echo ""
echo "ðŸ“ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ .env:"
echo "   nano $PROJECT_DIR/.env"
echo "   (Ð¿Ð¾ÑÐ»Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹: systemctl restart finance-bot)"
echo ""
echo "ðŸ—‘ï¸  Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð±Ð¾Ñ‚Ð°:"
echo "   systemctl stop finance-bot"
echo "   systemctl disable finance-bot"
echo "   rm /etc/systemd/system/finance-bot.service"
echo "   systemctl daemon-reload"
echo ""
print_info "Ð‘Ð¾Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ polling - Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ URL!"
print_info "Cloudflare Tunnel ÐÐ• Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ."
echo ""
print_success "Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! Ð’Ð°Ñˆ Ð±Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½ ðŸš€"
print_info "ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Telegram Ð¸ Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð±Ð¾Ñ‚Ñƒ /start"
